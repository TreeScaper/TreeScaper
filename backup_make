CC = g++

include makeCLVTreeScaper.inc

INCDIRS = -I$(CLAPPATH)/INCLUDE
CLAPLIB = $(CLAPPATH)/lapack$(PLAT).a
BLASLIB = $(CLAPPATH)/blas$(PLAT).a
F2CLIB = $(CLAPPATH)/F2CLIBS/libf2c.a

LDLIBS = $(CLAPLIB) $(BLASLIB) $(F2CLIB) -lm

CFLAG = -c -std=c++17 -Wall -DNDEBUG $(LDLIBS) $(INCDIRS)
LFLAG = -std=c++17 -Wall -DNDEBUG $(LDLIBS) $(INCDIRS)

OBJ = main.o array.o wstring.o sparse.o zdtree.o SpecMat.o header_info.o NLDR.o

main_src := array.hpp zdtree.hpp wstring.hpp zdtreeobj.hpp header_info.hpp zdfileio.hpp NLDR.hpp
wstring_src := 



CLVTreeScaper2 : $(OBJ)
	$(CC) $(LFLAG) $^ -o $@

main.o : array.hpp zdtree.hpp wstring.hpp zdtreeobj.hpp header_info.hpp zdfileio.hpp NLDR.hpp
wstring.o : 
header_info.o : wstring.hpp
array.o : 
sparse.o : array.hpp
zdtree.o : array.hpp sparse.hpp
zdtreeobj.o : array.hpp sparse.hpp zdtree.hpp SpecMat.hpp zdfileio.hpp
NLDR.o : wstring.hpp array.hpp SpecMat.hpp zdfileio.hpp f2c.h clapack.h 

CLAPACK:
	make f2clib -C $(CLAPPATH)
	make blaslib -C $(CLAPPATH)
	make -C $(CLAPPATH)/INSTALL
	make -C $(CLAPPATH)/SRC

.PHONY : clean
clean :
	rm CLVTreeScaper2 $(OBJ)
